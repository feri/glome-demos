<!DOCTYPE html>
<html>
  <head>
    <title>Cashback Catalog</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="Browse things you love and get cashback for buying">
    <meta name="author" content="Glome Inc.">
    <link rel="shortcut icon" type="image/png"  href="images/favicon.png"/>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css" />
    <script type="text/javascript" src="js/libs/jquery-1.10.2.js"></script>
    <script type="text/javascript" src="js/libs/handlebars-1.0.0.js"></script>
    <script type="text/javascript" src="js/libs/ember.js"></script>
    <script type="text/javascript" src="js/libs/ember-data.js"></script>
  </head>
  <body>
    <script type="text/x-handlebars">
      {{view App.HeaderView}}
      <div class="container content">
        {{partial 'title'}}
        {{partial 'main'}}
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="header">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <ul class="collapse navbar-collapse list-inline">
          {{view view.leftBox}}
          {{view view.centerBox}}
        </ul>
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="leftBox">
      <div class="type"><span>pair your wallet</span></div>
    </script>

    <script type="text/x-handlebars" data-template-name="centerBox">
      {{#if view.info}}
      <div class="pairing">
        <div class="instruction">Pair your wallet:</div>
        <div class="code">
          <input type="text" name="code_1" class="code" placeholder="0000" maxlength="4" />
          <input type="text" name="code_2" class="code" placeholder="0000" maxlength="4" />
          <input type="text" name="code_3" class="code" placeholder="0000" maxlength="4" />
          <div class="reply"></div>
        </div>
      </div>
      {{else}}
      <div class="info">
        Glome Wallet for Android is a tool for you to take control of and benefit
        from your digital footprint. Glome Wallet for Android is in private beta mode.
        Please email us at <a {{bind-attr href=contactMailto}}">{{contact}}</a> if you want to become a tester.
      </div>
      {{/if}}
      <div class="togglebox" {{action 'toggle' target=view}}></div>
    </script>

    <script type="text/x-handlebars" data-template-name="toggleBox"></script>

    <script type="text/x-handlebars" data-template-name="title">
      <div class="row row-cbc row-cbc-left title">
        <a href="/"><div class="col-xs-6 col-sm-3 picker"></div></a>
        <div class="col-xs-12 col-sm-9">
          <div class="small">Benefit from your data</div>
          <div class="big"><span>Cashback Catalog</span></div>
        </div>
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="main">
      <div class="row row-cbc row-cbc-right main">
        <div class="col-xs-6 col-sm-3 sidebar-cbc" id="sidebar" role="navigation">
          <div class="list-group">
            {{view App.CategoriesView}}
            <!-- other boxes may come here, like wishlist, promotions etc -->
          </div>
        </div>

        <div class="col-xs-12 col-sm-9 col-md-9 col-lg-9 meat">
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="cbc">Toggle nav</button>
          </p>

          {{view App.SearchView}}

          {{outlet}}
        </div>
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="categories">
      <div class="list-group-item-heading uppercase text-center">Categories</div>
      <ul class="list-group categories">
      {{#each category in controllers.products.categories}}
        {{#if category.hasProducts}}
        <li class="list-group-item category" {{bind-attr data-catid=category.id}} {{bind-attr data-urlname=category.urlName}}>
          <div class="name uppercase" {{action 'click' category target=view}}>{{category.name}}</div>
          {{#if category.subcategories}}
            <span {{action 'toggle' category.id target="controllers.category"}} class="toggle down"></span>
            <ul class="hidden list-group subcategories" {{bind-attr data-catid=category.id}}>
            {{#each subcategory in category.subcategories}}
              {{#if subcategory.num_published_products}}
              <li class="list-group-item capitalize"  {{bind-attr data-catid=subcategory.id}} {{bind-attr data-urlname=subcategory.urlName}}>
                <div class="name capitalize" {{action 'click' subcategory target=view}}>{{subcategory.name}}</div>
              </li>
              {{/if}}
            {{/each}}
            </ul>
          {{/if}}
        </li>
        {{/if}}
      {{/each}}
      </ul>
    </script>

    <script type="text/x-handlebars" data-template-name="search">
      {{view Ember.TextField placeholder='Search' action='search' controller=App.ProductsController}}
    </script>

    <script type="text/x-handlebars" data-template-name="products">
      {{#if currentProduct}}
        {{view view.singleView}}
      {{else}}
        {{view view.gridView}}
      {{/if}}
    </script>

    <script type="text/x-handlebars" data-template-name="grid">
      {{#each product in model}}
      <div class="col-xs-6 col-sm-3 col-md-3 product">
        {{#link-to 'products.show' category product}}
        <div class="image">
          <img class="img-responsive img-rounded" {{bind-attr src=product.content}} {{bind-attr alt=product.title}}/>
        </div>
        <div class="name">{{product.title}}</div>
        {{/link-to}}
        {{#if product.last_price}}
        <div class="price">
          <span class="price-new">{{product.price}}</span>
        </div>
        {{/if}}
        <div class="cart">
          <input class="button" type="button" {{action 'cashBack' product target="controllers.product"}} {{bind-attr value=product.cashback}} />
        </div>
      </div>
      {{/each}}
    </script>

    <script type="text/x-handlebars" data-template-name="single">
      {{#if controllers.products.currentCategory}}
      <h3>{{currentProduct.title}}</h3>
      <div class="col-xs-5 col-sm-5">
        <div class="image">
          <img class="img-responsive img-rounded" {{action 'loadProducts' controllers.products.currentCategory target="controllers.products"}} {{bind-attr src=currentProduct.content}} {{bind-attr title=currentProduct.title}} {{bind-attr alt=currentProduct.title}} />
        </div>
      </div>
      <div class="col-xs-5 col-sm-7">
        <div class="description">
          {{currentProduct.description}}
        </div>
        {{#if currentProduct.last_price}}
        <div class="price">
          {{currentProduct.price}}
        </div>
        {{/if}}
        <div class="cart">
          <input class="button" type="button" {{action 'cashBack' currentProduct target="controllers.product"}} {{bind-attr value=currentProduct.cashback}} />
        </div>
      </div>
      {{/if}}
    </script>

    <script src="js/app.js"></script>
    <script src="js/router.js"></script>
    <script src="js/routes/application_route.js"></script>
    <script src="js/routes/index_route.js"></script>
    <script src="js/routes/products_route.js"></script>
    <script src="js/routes/loading_route.js"></script>
    <script src="js/controllers/application.js"></script>
    <script src="js/controllers/auth.js"></script>
    <script src="js/controllers/user.js"></script>
    <script src="js/controllers/products.js"></script>
    <script src="js/controllers/product.js"></script>
    <script src="js/controllers/category.js"></script>
    <script src="js/controllers/pairing.js"></script>
    <script src="js/controllers/action.js"></script>
    <script src="js/controllers/program.js"></script>
    <script src="js/controllers/ad.js"></script>
    <script src="js/controllers/sync.js"></script>
    <script src="js/models/user.js"></script>
    <script src="js/models/product.js"></script>
    <script src="js/models/category.js"></script>
    <script src="js/models/pairing.js"></script>
    <script src="js/models/action.js"></script>
    <script src="js/models/program.js"></script>
    <script src="js/models/ad.js"></script>
    <script src="js/models/sync.js"></script>
    <script src="js/views/application.js"></script>
    <script src="js/views/header.js"></script>
    <script src="js/views/categories.js"></script>
    <script src="js/views/products.js"></script>
    <script src="js/views/search.js"></script>
    <script src="js/views/programs.js"></script>
    <script src="js/views/pairing.js"></script>
    <script src="js/views/loading.js"></script>
  </body>
</html>